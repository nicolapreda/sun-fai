<style>
    /* Styling derived from index.ejs to ensure consistency in navbar partial */
    .nav-brush-link {
        position: relative;
        display: inline-block;
        padding: 0 5px;
        z-index: 10;
        text-decoration: none;
    }

    .nav-brush-link::before {
        content: '';
        position: absolute;
        left: -5px;
        right: -5px;
        top: 50%;
        bottom: 0;
        height: 50%;
        background-image: url("data:image/svg+xml,%3Csvg width='400' height='80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5,40 Q50,10 100,35 T200,40 T300,35 T395,40' stroke='%23FFD600' stroke-width='70' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
        background-size: 100% 100%;
        background-repeat: no-repeat;
        z-index: -1;
        transform: rotate(-1deg) translateY(-20%);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    /* Hover effect for desktop */
    .nav-brush-link:hover::before {
        opacity: 1;
    }

    /* Active State (optional, if we want to highlight current page) */
    .nav-brush-link.active::before {
        opacity: 1;
    }

    /* Mobile Menu Overlay Styles */
    #mobile-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        z-index: 9999;
        /* Very high z-index to cover everything */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    #mobile-menu-overlay.open {
        opacity: 1;
        pointer-events: auto;
    }

    /* Mobile Menu Items always show brush */
    .mobile-menu-item {
        position: relative;
        display: inline-block;
        font-weight: 900;
        /* Extra bold */
        font-size: 1.5rem;
        /* Large text */
        color: black;
        margin-bottom: 1.5rem;
        z-index: 1;
    }

    .mobile-menu-item::before {
        content: '';
        position: absolute;
        left: -8px;
        right: -8px;
        top: 40%;
        bottom: 10%;
        background-image: url("data:image/svg+xml,%3Csvg width='400' height='80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5,40 Q50,10 100,35 T200,40 T300,35 T395,40' stroke='%23FFD600' stroke-width='70' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
        background-size: 100% 80%;
        background-repeat: no-repeat;
        z-index: -1;
        transform: rotate(-2deg);
        opacity: 1;
        /* Always visible on mobile per design */
    }
</style>

<!-- NAVIGATION BAR container -->
<nav class="fixed top-0 left-0 right-0 z-50 bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-6 py-4">
        <div class="flex justify-between items-center">
            <!-- Logo -->
            <div class="flex items-center">
                <a href="/">
                    <img src="/assets/logo.png" alt="Sun-Fai Logo" class="h-12">
                </a>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-8">
                <!-- Using nav-brush-link for hover effect -->
                <a href="/chi-siamo" class="nav-brush-link text-sm font-bold text-black transition">CHI SIAMO</a>
                <a href="/cosa-facciamo" class="nav-brush-link text-sm font-bold text-black transition">COSA
                    FACCIAMO</a>
                <a href="/le-cer" class="nav-brush-link text-sm font-bold text-black transition">LE CER(S)</a>
                <a href="/notizie" class="nav-brush-link text-sm font-bold text-black transition">NOTIZIE</a>
                <a href="/#contatti" class="nav-brush-link text-sm font-bold text-black transition">CONTATTACI</a>
                <a href="/diventa-socio" class="nav-brush-link text-sm font-bold text-black transition">DIVENTA
                    SOCIO</a>
            </div>

            <!-- Mobile Menu Button (Hamburger) -->
            <div class="md:hidden">
                <button id="mobile-menu-open-btn" class="text-black focus:outline-none p-2">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</nav>

<!-- FULL SCREEN MOBILE OVERLAY -->
<div id="mobile-menu-overlay">
    <!-- Close Button (Top Right) -->
    <button id="mobile-menu-close-btn" class="absolute top-6 right-6 text-sunfai-yellow focus:outline-none">
        <svg class="w-10 h-10" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </button>

    <!-- Menu Links -->
    <div class="flex flex-col items-center justify-center w-full">
        <a href="/chi-siamo" class="mobile-menu-item mobile-link-close">Chi siamo</a>
        <a href="/cosa-facciamo" class="mobile-menu-item mobile-link-close">Cosa facciamo</a>
        <a href="/le-cer" class="mobile-menu-item mobile-link-close">Le CER(S)</a>
        <a href="/notizie" class="mobile-menu-item mobile-link-close">Notizie</a>
        <a href="/#contatti" class="mobile-menu-item mobile-link-close">Contattaci</a>
        <a href="/diventa-socio" class="mobile-menu-item mobile-link-close">Diventa socio</a>
    </div>

    <!-- Bottom Logo -->
    <div class="mt-12">
        <img src="/assets/logo.png" alt="Sun-Fai Logo" class="h-16">
    </div>
</div>

<script>
    const openBtn = document.getElementById('mobile-menu-open-btn');
    const closeBtn = document.getElementById('mobile-menu-close-btn');
    const overlay = document.getElementById('mobile-menu-overlay');
    const mobileLinks = document.querySelectorAll('.mobile-link-close');

    // Open Menu
    if (openBtn) {
        openBtn.addEventListener('click', () => {
            overlay.classList.add('open');
            document.body.style.overflow = 'hidden'; // Prevent scrolling when menu is open
        });
    }

    // Close Menu
    if (closeBtn) {
        closeBtn.addEventListener('click', () => {
            overlay.classList.remove('open');
            document.body.style.overflow = '';
        });
    }

    // Close when clicking a link
    mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
            overlay.classList.remove('open');
            document.body.style.overflow = '';
        });
    });
</script>