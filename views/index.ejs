<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sun-Fai | Cooperativa Energia Rinnovabile - Comunit√† Energetica Solidale</title>
    <meta name="description"
        content="Sun-Fai √® una cooperativa nata per essere una comunit√† energetica rinnovabile sociale e solidale. Scopri come condividere l'energia in modo sostenibile." />
    <link rel="icon" href="/assets/logo-min.png" type="image/png" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sunfai-yellow': '#FFD600',
                        'sunfai-black': '#000000',
                        'sunfai-white': '#FFFFFF',
                    },
                    fontFamily: {
                        'sans': ['"Glacial Indifference"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        @font-face {
            font-family: 'Glacial Indifference';
            src: url('./assets/GlacialIndifference-Regular.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Glacial Indifference';
            src: url('./assets/GlacialIndifference-Bold.otf') format('opentype');
            font-weight: bold;
            font-style: normal;
        }

        @font-face {
            font-family: 'Glacial Indifference';
            src: url('./assets/GlacialIndifference-Italic.otf') format('opentype');
            font-weight: normal;
            font-style: italic;
        }

        html {
            scroll-behavior: smooth;
            font-family: 'Glacial Indifference', sans-serif;
        }

        .yellow-brush-bg {
            position: relative;
            display: inline-block;
            padding: 0 10px;
        }

        .yellow-brush-bg::before {
            content: '';
            position: absolute;
            left: -10px;
            right: -10px;
            top: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='400' height='80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5,40 Q50,10 100,35 T200,40 T300,35 T395,40' stroke='%23FFD600' stroke-width='70' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
            background-size: 100% 100%;
            background-repeat: no-repeat;
            z-index: -1;
            transform: rotate(-1deg);
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .animate-scroll {
            animation: scroll 40s linear infinite;
            will-change: transform;
        }

        .mask-gradient-sides {
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }

        .animate-scroll:hover {
            animation-play-state: paused;
        }

        .news-badge {
            background-color: #000000;
            color: #FFFFFF;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .cer-badge {
            position: relative;
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            border: 4px solid #000;
        }

        .cer-badge::before {
            content: '';
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 25px solid #FFD600;
        }

        .cer-badge::after {
            content: '';
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #FFD600;
        }

        .cer-badge-ribbons {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .cer-badge-ribbon {
            width: 30px;
            height: 50px;
            background: #FFD600;
            clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%);
        }
    </style>
</head>

<body class="bg-white">

    <!-- NAVIGATION -->
    <%- include('partials/navbar') %>
        <!-- HERO SECTION -->
        <section id="home" class="relative min-h-[80vh] flex items-center justify-center overflow-hidden">
            <!-- Background Video -->
            <video autoplay muted loop playsinline class="absolute top-0 left-0 w-full h-full object-cover z-0">
                <source src="./assets/Video%20Hero%20Sun-Fai.mov" type="video/mp4">
                <source src="./assets/Video%20Hero%20Sun-Fai.mov" type="video/quicktime">
                Your browser does not support the video tag.
            </video>

            <!-- Overlay for better text readability -->
            <div class="absolute top-0 left-0 w-full h-full bg-black/30 z-10"></div>

            <!-- Content -->
            <div class="relative z-20 text-left px-6 mt-20 w-full max-w-7xl mx-auto">
                <h1
                    class="text-5xl md:text-7xl lg:text-8xl font-black text-white leading-tight tracking-tight drop-shadow-lg">
                    Tutta un'altra energia.<br>
                    La tua.<br>
                    La nostra.
                </h1>
            </div>
        </section>

        <!-- LA NOSTRA REALT√Ä SECTION -->
        <section class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-black mb-16 relative inline-block">
                    La nostra realt√†
                    <span class="absolute bottom-2 left-0 w-full h-4 bg-sunfai-yellow -z-10 transform -rotate-1"></span>
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1: CHI SIAMO -->
                    <div
                        class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 group cursor-pointer">
                        <div class="relative h-64 overflow-hidden">
                            <img src="./assets/benvenuti.jpg" alt="Chi Siamo"
                                class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
                        </div>
                        <div class="p-8 text-center">
                            <h3 class="text-3xl font-black inline-block relative">
                                CHI
                                <span class="block text-sunfai-black mt-1">SIAMO</span>
                                <span
                                    class="absolute bottom-1 left-0 w-full h-3 bg-sunfai-yellow -z-10 transform -rotate-2"></span>
                            </h3>
                        </div>
                    </div>

                    <!-- Card 2: COSA FACCIAMO -->
                    <div
                        class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 group cursor-pointer">
                        <div class="relative h-64 overflow-hidden">
                            <img src="https://placehold.co/600x400/png?text=Cosa+Facciamo" alt="Cosa Facciamo"
                                class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
                            <div
                                class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 group-hover:bg-opacity-30 transition">
                                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg">
                                    <svg class="w-8 h-8 text-black ml-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M8 5v14l11-7z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="p-8 text-center">
                            <h3 class="text-3xl font-black inline-block relative">
                                COSA
                                <span class="block text-sunfai-black mt-1">FACCIAMO</span>
                                <span
                                    class="absolute bottom-1 left-0 w-full h-3 bg-sunfai-yellow -z-10 transform rotate-1"></span>
                            </h3>
                        </div>
                    </div>

                    <!-- Card 3: COSA SONO LE CER(S) -->
                    <div
                        class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 group cursor-pointer">
                        <div class="relative h-64 overflow-hidden">
                            <img src="https://placehold.co/600x400/png?text=Cosa+Sono+Le+CER" alt="Cosa Sono Le CER"
                                class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
                            <div
                                class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 group-hover:bg-opacity-30 transition">
                                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg">
                                    <svg class="w-8 h-8 text-black ml-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M8 5v14l11-7z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="p-8 text-center">
                            <h3 class="text-3xl font-black inline-block relative">
                                COSA SONO
                                <span class="block text-sunfai-black mt-1">LE CER(S)</span>
                                <span
                                    class="absolute bottom-1 left-0 w-full h-3 bg-sunfai-yellow -z-10 transform -rotate-1"></span>
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- ARDAK√â SECTION -->
        <section class="py-20 bg-white">
            <div class="max-w-4xl mx-auto px-6 text-center">
                <h2 class="text-4xl md:text-5xl font-black mb-8 inline-block relative">
                    Ardak√©
                    <span class="absolute bottom-3 left-0 w-full h-5 bg-sunfai-yellow -z-10 transform -rotate-2"></span>
                </h2>

                <p class="text-xl text-gray-700 mb-12">
                    Ardak√© √® la nostra nuovissima piattaforma che ti permette di monitorare in tempo reale quanta
                    energia
                    mettiamo a disposizione delle nostre CER.
                </p>

                <div class="flex flex-col items-center gap-8 mb-12">
                    <a href="https://sun-fai.org/gestione_cer/file_server/monitoring_energy.html" target="_blank"
                        rel="noopener noreferrer">
                        <img src="./assets/ardake_logo.png" alt="Ardak√© Logo"
                            class="h-64 object-contain hover:scale-105 transition duration-300">
                    </a>
                </div>

                <a href="https://sun-fai.org/gestione_cer/file_server/monitoring_energy.html" target="_blank"
                    rel="noopener noreferrer" class="text-sm font-bold underline hover:text-sunfai-yellow transition">
                    Clicca sul logo per accedere alla piattaforma
                </a>
            </div>
        </section>



        <!-- CONFIGURAZIONI SECTION -->
        <section id="configurazioni" class="py-20 bg-black text-white">
            <div class="max-w-7xl mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-black mb-16">
                    Le nostre<br>
                    configurazioni
                </h2>

                <div class="flex flex-col lg:flex-row gap-12 items-center mb-12">
                    <!-- Map Image -->
                    <div class="w-full lg:w-1/2">
                        <div class="rounded-xl overflow-hidden border-4 border-gray-800 h-[400px]">
                            <!-- Leaflet CSS -->
                            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
                                integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
                            <!-- Leaflet Make sure you put this AFTER Leaflet's CSS -->
                            <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
                                integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

                            <div id="map" class="w-full h-full"></div>

                            <script>
                                document.addEventListener('DOMContentLoaded', function () {
                                    // Locations
                                    const locations = [
                                        { name: "Dalmine", coords: [45.6484, 9.6056], type: "yellow", status: "Attiva" },
                                        { name: "Carenno", coords: [45.8051, 9.4962], type: "yellow", status: "Attiva" },
                                        { name: "Serina", coords: [45.8715, 9.7346], type: "green", status: "In arrivo" },
                                        { name: "Stezzano", coords: [45.6492, 9.6543], type: "green", status: "In arrivo" },
                                        { name: "Osio Sotto", coords: [45.6171, 9.5934], type: "orange", status: "In valutazione" }
                                    ];

                                    // Initialize map
                                    const map = L.map('map').setView([45.72675, 9.5509], 10);

                                    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                        maxZoom: 19,
                                        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                                    }).addTo(map);

                                    // Function to create colored SVG icons
                                    function createIcon(color) {
                                        return L.divIcon({
                                            className: 'custom-pin',
                                            html: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${color}" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10 drop-shadow-md filter drop-shadow-lg"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3" fill="white"></circle></svg>`,
                                            iconSize: [40, 40],
                                            iconAnchor: [20, 40],
                                            popupAnchor: [0, -40]
                                        });
                                    }

                                    const colors = {
                                        yellow: '#FFD600', // Sun-Fai Yellow
                                        green: '#22c55e',  // Green 500
                                        orange: '#f97316'  // Orange 500
                                    };

                                    const markers = [];

                                    locations.forEach(loc => {
                                        const marker = L.marker(loc.coords, {
                                            icon: createIcon(colors[loc.type])
                                        }).addTo(map);

                                        marker.bindPopup(`<b>CER ${loc.name}</b><br>${loc.status}`, {
                                            closeButton: false,
                                            offset: [0, -20]
                                        });

                                        marker.on('mouseover', function (e) {
                                            this.openPopup();
                                        });

                                        marker.on('mouseout', function (e) {
                                            this.closePopup();
                                        });

                                        markers.push(marker);
                                    });

                                    // Fit bounds to show all markers
                                    const group = new L.featureGroup(markers);
                                    map.fitBounds(group.getBounds(), { padding: [50, 50] });
                                });
                            </script>
                        </div>

                        <!-- Map Legend -->
                        <div
                            class="flex flex-wrap justify-center gap-4 mt-6 text-sm font-bold bg-white text-black p-4 rounded-xl">
                            <div class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-sunfai-yellow border border-black"></span> Attiva
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-green-500 border border-black"></span> In arrivo
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="w-3 h-3 rounded-full bg-orange-500 border border-black"></span> In
                                valutazione
                            </div>
                        </div>
                    </div>

                    <!-- Stats -->
                    <div class="w-full lg:w-1/2">
                        <div class="grid grid-cols-2 gap-x-8 gap-y-16 text-center">
                            <div>
                                <div class="text-6xl font-black mb-2">2</div>
                                <div class="text-sm font-bold uppercase tracking-wider">CER aperte e gestite<br>da
                                    Sun-Fai
                                </div>
                            </div>
                            <div>
                                <div class="text-6xl font-black mb-2">249 kWp</div>
                                <div class="text-sm font-bold uppercase tracking-wider">Potenza totale dei<br>nostri
                                    impianti</div>
                            </div>
                            <div>
                                <a href="https://sun-fai.org/gestione_cer/file_server/monitoring_energy.html"
                                    target="_blank" rel="noopener noreferrer" class="group">
                                    <div
                                        class="text-6xl font-black mb-2 text-sunfai-yellow group-hover:text-white transition duration-300">
                                        <span id="stats-current-energy">--</span> <span class="text-white">kWp</span>
                                    </div>
                                    <div
                                        class="text-sm font-bold uppercase tracking-wider group-hover:text-sunfai-yellow transition duration-300">
                                        Energia disponibile<br>in questo
                                        momento</div>
                                </a>
                            </div>
                            <div>
                                <div class="text-6xl font-black mb-2">100</div>
                                <div class="text-sm font-bold uppercase tracking-wider">Numero di soci di Sun-fai</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <a href="https://sun-fai.org/gestione_cer/file_server/monitoring_energy.html" target="_blank"
                        rel="noopener noreferrer"
                        class="inline-block border border-white rounded-full px-8 py-4 font-bold hover:bg-white hover:text-black transition duration-300">
                        Accedi alla nostra piattaforma di monitoraggio Ardak√©!
                    </a>
                </div>
            </div>
        </section>

        <!-- Dicono di noi Section -->
        <section class="py-20 bg-white overflow-hidden">
            <div class="max-w-7xl mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-black mb-16 relative inline-block">
                    Dicono di noi
                    <span class="absolute bottom-2 left-0 w-full h-4 bg-sunfai-yellow -z-10 transform -rotate-1"></span>
                </h2>
            </div>

            <!-- Infinite Horizontal Scroll Container -->
            <div id="carousel-scroll-container" class="relative w-full overflow-x-auto scrollbar-hide">
                <div id="carousel-track" class="flex space-x-6 w-max flex-nowrap">

                    <!-- Original Set of Cards -->
                    <!-- Card 1 -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"L'energia che nasce dalla comunit√†"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Sun-Fai √® stata premiata all'IFEC e ha ricevuto il premio Cali 2024 per l'innovazione
                            sociale ed energetica. La cooperativa di Dalmine √® stata riconosciuta come modello
                            regionale.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">L'Eco di
                                Bergamo</div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Coi risparmi in bolletta, pi√π aiuti a chi ne ha
                            bisogno"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            La cooperativa Sun-Fai sostiene il Centro di primo ascolto di Dalmine finanziando
                            l'installazione di un impianto fotovoltaico. Il risparmio annuale permetter√† al Centro
                            di offrire pi√π pacchi alimentari.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">L'Eco di
                                Bergamo</div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"La cooperativa di giovani che scommette sulle CER"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Sun-Fai √® una cooperativa di giovani di Dalmine che promuove equit√† sociale, risparmio
                            energetico e sostenibilit√†. Offre supporto a privati, enti pubblici e imprese.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Corriere
                                della Sera</div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 4 -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Innovazione e Sostenibilit√†"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Un modello virtuoso che mette al centro le persone e l'ambiente. Sun-Fai dimostra come
                            le comunit√† energetiche siano il futuro del nostro territorio.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Bergamo News
                            </div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 5 -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Un esempio per tutta Italia"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Dalmine si conferma all'avanguardia grazie all'impegno di Sun-Fai. La cooperativa √®
                            stata citata come esempio di eccellenza nel panorama nazionale.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">La Repubblica
                            </div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 6 -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Energia pulita a Km 0"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Produrre, consumare e condividere energia rinnovabile: la sfida vinta da Sun-Fai che
                            coinvolge cittadini e imprese in un progetto comune.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Green Me
                            </div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Duplicate Set for Infinite Loop -->
                    <!-- Card 1 Dupe -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"L'energia che nasce dalla comunit√†"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Sun-Fai √® stata premiata all'IFEC e ha ricevuto il premio Cali 2024 per l'innovazione
                            sociale ed energetica. La cooperativa di Dalmine √® stata riconosciuta come modello
                            regionale.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">L'Eco di
                                Bergamo</div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 2 Dupe -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Coi risparmi in bolletta, pi√π aiuti a chi ne ha
                            bisogno"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            La cooperativa Sun-Fai sostiene il Centro di primo ascolto di Dalmine finanziando
                            l'installazione di un impianto fotovoltaico. Il risparmio annuale permetter√† al Centro
                            di offrire pi√π pacchi alimentari.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">L'Eco di
                                Bergamo</div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 3 Dupe -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"La cooperativa di giovani che scommette sulle CER"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Sun-Fai √® una cooperativa di giovani di Dalmine che promuove equit√† sociale, risparmio
                            energetico e sostenibilit√†. Offre supporto a privati, enti pubblici e imprese.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Corriere
                                della Sera</div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 4 Dupe -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Innovazione e Sostenibilit√†"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Un modello virtuoso che mette al centro le persone e l'ambiente. Sun-Fai dimostra come
                            le comunit√† energetiche siano il futuro del nostro territorio.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Bergamo News
                            </div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 5 Dupe -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Un esempio per tutta Italia"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Dalmine si conferma all'avanguardia grazie all'impegno di Sun-Fai. La cooperativa √®
                            stata citata come esempio di eccellenza nel panorama nazionale.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">La Repubblica
                            </div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                    <!-- Card 6 Dupe -->
                    <div
                        class="w-[300px] md:w-[400px] border-2 border-black rounded-3xl p-8 flex flex-col bg-white shadow-lg hover:shadow-xl transition relative group flex-shrink-0">
                        <div
                            class="absolute top-0 right-0 w-16 h-16 bg-sunfai-yellow opacity-20 rounded-bl-full rounded-tr-3xl -z-10 group-hover:opacity-100 transition duration-300">
                        </div>
                        <h3 class="text-xl font-black mb-4">"Energia pulita a Km 0"</h3>
                        <p class="text-sm text-gray-700 mb-8 flex-grow leading-relaxed">
                            Produrre, consumare e condividere energia rinnovabile: la sfida vinta da Sun-Fai che
                            coinvolge cittadini e imprese in un progetto comune.
                        </p>
                        <div class="mt-auto">
                            <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Green Me
                            </div>
                            <a href="#"
                                class="inline-block text-black font-bold border-b-2 border-sunfai-yellow hover:bg-sunfai-yellow hover:border-transparent transition px-1">Leggi
                                l'articolo</a>
                        </div>
                    </div>

                </div>
            </div>
            </div>
        </section>

        <!-- NOTIZIE SECTION -->
        <section id="notizie" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-black mb-16 relative inline-block">
                    Notizie
                    <span class="absolute bottom-2 left-0 w-full h-4 bg-sunfai-yellow -z-10 transform -rotate-1"></span>
                </h2>

                <div class="flex flex-col lg:flex-row gap-12">
                    <% if (news && news.length> 0) { %>
                        <!-- Featured Article (First Item) -->
                        <div class="w-full lg:w-1/2 group cursor-pointer">
                            <div class="relative rounded-2xl overflow-hidden shadow-xl mb-6 aspect-[4/3]">
                                <img src="<%= news[0].image || './assets/placeholder.jpg' %>" alt="<%= news[0].title %>"
                                    class="w-full h-full object-cover transform transition duration-500 group-hover:scale-105">
                                <div
                                    class="absolute bottom-0 left-0 p-6 bg-gradient-to-t from-black to-transparent w-full">
                                    <span class="text-white text-sm font-bold mb-2 block">
                                        <%= new Date(news[0].date).toLocaleDateString('it-IT', { day: 'numeric' ,
                                            month: 'long' , year: 'numeric' }) %>
                                    </span>
                                    <h3 class="text-3xl font-black text-white leading-tight">
                                        <%= news[0].title %>
                                    </h3>
                                </div>
                            </div>
                            <a href="#"
                                class="bg-sunfai-yellow text-black px-6 py-2 rounded-full font-bold text-sm inline-block hover:bg-yellow-500 transition">
                                Leggi l'articolo
                            </a>
                        </div>

                        <!-- Article List (Remaining Items) -->
                        <div class="w-full lg:w-1/2 flex flex-col justify-center space-y-12">
                            <% news.slice(1).forEach(item=> { %>
                                <div>
                                    <h3 class="text-2xl font-black mb-2 leading-tight">
                                        <%= item.title %>
                                    </h3>
                                    <a href="#"
                                        class="text-black font-medium underline hover:text-sunfai-yellow transition">
                                        Clicca per leggere l'articolo
                                    </a>
                                </div>
                                <% }); %>
                        </div>
                        <% } else { %>
                            <p class="text-center w-full">Nessuna notizia disponibile al momento.</p>
                            <% } %>
                </div>
            </div>
        </section>

        <!-- I PROSSIMI EVENTI SECTION -->
        <section id="eventi" class="py-20 bg-black text-white">
            <div class="max-w-7xl mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-black mb-16">I Prossimi Eventi</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <% if (events && events.length> 0) { %>
                        <% events.forEach(event=> {
                            const date = new Date(event.date);
                            const month = date.toLocaleDateString('it-IT', { month: 'short' }).toUpperCase();
                            const day = date.getDate().toString().padStart(2, '0');
                            %>
                            <div class="flex items-start gap-4 group cursor-pointer">
                                <div
                                    class="bg-white text-black rounded-full w-16 h-16 flex flex-col items-center justify-center flex-shrink-0 border-4 border-transparent group-hover:border-sunfai-yellow transition">
                                    <span class="text-xs font-bold text-red-500 uppercase">
                                        <%= month %>
                                    </span>
                                    <span class="text-2xl font-black leading-none">
                                        <%= day %>
                                    </span>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg mb-1 group-hover:text-sunfai-yellow transition">
                                        <%= event.title %>
                                    </h3>
                                    <p class="text-gray-400 text-sm">
                                        <%= event.location %>
                                    </p>
                                    <!-- Optional time if available in DB or future updates -->
                                </div>
                            </div>
                            <% }); %>
                                <% } else { %>
                                    <div class="col-span-3 text-center">
                                        <p class="text-gray-400">Nessun evento in programma al momento.</p>
                                    </div>
                                    <% } %>
                </div>
            </div>
        </section>

        <!-- CONTATTI SECTION -->
        <section id="contatti" class="py-20 bg-white">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <!-- Left Column: Info -->
                    <div class="w-full md:w-1/2 border-2 border-black rounded-3xl p-12">
                        <h2 class="text-4xl md:text-5xl font-black mb-6">Contattaci</h2>

                        <p class="text-lg font-bold mb-8 leading-relaxed">
                            Contattaci per ricevere <span
                                class="yellow-brush-bg text-black inline-block transform -rotate-1">informazioni</span>,<br>
                            proporre una collaborazione o unirti alla<br>
                            comunit√† Sun-Fai.
                        </p>

                        <div class="flex gap-4 mb-12">
                            <a href="#" class="text-3xl hover:text-sunfai-yellow transition"><i
                                    class="fas fa-map-marker-alt"></i> üó∫Ô∏è</a>
                            <a href="#" class="text-3xl hover:text-sunfai-yellow transition"><i
                                    class="fab fa-instagram"></i> üì∑</a>
                        </div>

                        <div class="space-y-4">
                            <a href="/diventa-socio"
                                class="block w-full border-2 border-black rounded-full py-3 px-6 font-bold text-center hover:bg-black hover:text-white transition">
                                Diventa Socio
                            </a>
                            <a href="mailto:info@sun-fai.org"
                                class="block w-full border-2 border-black rounded-full py-3 px-6 font-bold text-center hover:bg-black hover:text-white transition">
                                info@sun-fai.org
                            </a>
                        </div>
                    </div>

                    <!-- Right Column: Illustration -->
                    <div class="w-full md:w-1/2 text-center">
                        <div class="relative inline-block">
                            <!-- Speech Bubbles (CSS only representation or SVG) -->
                            <div
                                class="absolute -top-20 left-10 bg-sunfai-yellow border-2 border-black rounded-full px-4 py-2 font-bold transform -rotate-12 z-10">
                                ‚ñ°‚óã‚ñ≥
                            </div>
                            <div
                                class="absolute -top-10 right-10 bg-white border-2 border-black rounded-full px-4 py-2 font-bold transform rotate-12 z-10">
                                (‚ñ°‚óã‚ñ≥)
                            </div>

                            <img src="./assets/contattaci.jpg" alt="Persone che parlano"
                                class="max-w-full h-auto mx-auto">

                            <p class="mt-8 text-sm italic text-gray-600">
                                Tutta un'altra energia.<br>
                                La tua. La nostra.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <%- include('partials/footer') %>

            <script>
                // Mobile menu toggle
                const mobileMenuBtn = document.getElementById('mobile-menu-btn');
                const mobileMenu = document.getElementById('mobile-menu');
                const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');

                mobileMenuBtn.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });

                mobileMenuLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        mobileMenu.classList.add('hidden');
                    });
                });

                // Smooth scrolling per i link interni
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });

                // Parallax effect per hero section
                window.addEventListener('scroll', () => {
                    const scrolled = window.pageYOffset;
                    const hero = document.querySelector('.gradient-bg');
                    if (hero) {
                        hero.style.transform = `translateY(${scrolled * 0.5}px)`;
                    }
                });

                // Infinite Carousel Logic
                document.addEventListener('DOMContentLoaded', () => {
                    const container = document.getElementById('carousel-scroll-container');
                    if (!container) return;

                    let scrollSpeed = 0.5; // Adjust speed as needed
                    let isPaused = false;
                    let animationId;

                    // Pause on interaction
                    container.addEventListener('mouseenter', () => isPaused = true);
                    container.addEventListener('mouseleave', () => isPaused = false);
                    container.addEventListener('touchstart', () => isPaused = true);
                    container.addEventListener('touchend', () => isPaused = false);

                    function autoScroll() {
                        if (!isPaused) {
                            container.scrollLeft += scrollSpeed;
                            // Check for wrap around
                            // We assume the second set starts at exactly half the width
                            // But since simple math might drift, robust way is to check if we passed half
                            if (container.scrollLeft >= container.scrollWidth / 2) {
                                container.scrollLeft = 0;
                            }
                        }
                        animationId = requestAnimationFrame(autoScroll);
                    }

                    // Start auto scroll
                    animationId = requestAnimationFrame(autoScroll);
                });

                // Fetch Energy Data for Stats Section
                async function updateEnergyStatus() {
                    const valueElement = document.getElementById('stats-current-energy');
                    if (!valueElement) return;

                    try {
                        const response = await fetch('/api/energy-status');
                        const data = await response.json();

                        if (data && data.misure && data.misure.length > 0) {
                            const lastMeasure = data.misure[data.misure.length - 1];
                            const energyValue = parseFloat(lastMeasure.somma_energia).toFixed(1); // Format to 1 decimal
                            valueElement.textContent = energyValue;
                        } else {
                            console.warn("No energy data available");
                            valueElement.textContent = "--";
                        }
                    } catch (error) {
                        console.error("Error fetching energy status:", error);
                        valueElement.textContent = "--";
                    }
                }

                // Update immediately and then every 5 minutes
                updateEnergyStatus();
                setInterval(updateEnergyStatus, 5 * 60 * 1000);
            </script>

</body>

</html>